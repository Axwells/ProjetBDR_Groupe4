# ProjetBDR_Groupe4

## How to set up the project

### Back-end (Django)

1. Create a conda environment

```bash
conda create -n bdr python=3.11 anaconda
conda activate bdr
```

2. Install Django

```python
python -m pip install Django
```
3. Create your database

```bash
psql -U postgres -d postgres -h localhost -p 5666
```

```bash
> CREATE DATABASE "projet-bdr";
CREATE DATABASE
> CREATE USER admin WITH PASSWORD '1234';
CREATE ROLE
> GRANT ALL PRIVILEGES ON DATABASE "projet-bdr" TO admin;
GRANT
> exit
```
4. Migrate to create tables
```bash
cd carinspector
python manage.py migrate
```
5. Launch the back-end server
```bash
python manage.py runserver
```

### Front-end (Vue.js)

1. Install Node.js and npm

Vue.js requires Node.js to work.

Download and install Node.js from the official website: Node.js.
Install the LTS version (recommended for stability).
Verify that Node.js and npm are properly installed:
```bash
node -v
npm -v
```

2. Install dependencies and Axios
```bash
cd vue-project
npm install
npm install axios
```
3. Start the development server
```bash
npm run dev
```
By default, the project will be accessible at: http://localhost:5173.



## Nota bene

### If you need to drop your DB

```bash
psql -U postgres -d postgres -h localhost -p 5666 #connect to another db
> DROP DATABASE "projet-bdr";
DROP DATABASE
> CREATE DATABASE "projet-bdr";
CREATE DATABASE
> CREATE USER admin WITH PASSWORD '1234';
CREATE ROLE
> GRANT ALL PRIVILEGES ON DATABASE "projet-bdr" TO admin;
GRANT
> exit
python manage.py makemigrations
python manage.py migrate
```

### Connect to your sql database shell

```bash
psql -U postgres -d projet-bdr -h localhost -p 5666
password : trustno1
```

### Create an admin user

```python
python manage.py createsuperuser
```

### To create a django app in the project

```python
python manage.py startapp <name_app>
```

### To see the sql script behind a migration

```python
python manage.py sqlmigrate app 0001
```

*Replace app with the app name you want to check the sql and 0001 with the correct migration number you want to check*

#### Result of our main migration :

```sql
BEGIN;
--
-- Create model AppUser
--
CREATE TABLE "AppUser" ("email" varchar(320) NOT NULL PRIMARY KEY, "username" varchar(80) NOT NULL, "password" varchar(80) NOT NULL, "isSuperUser" boolean NOT NULL);
--
-- Create model Brand
--
CREATE TABLE "Brand" ("name" varchar(50) NOT NULL PRIMARY KEY, "image" varchar(1030) NULL);
--
-- Create model Category
--
CREATE TABLE "Category" ("name" varchar(80) NOT NULL PRIMARY KEY);
--
-- Create model Engine
--
CREATE TABLE "Engine" ("modelName" varchar(80) NOT NULL PRIMARY KEY, "horsePower" integer NOT NULL CHECK ("horsePower" >= 0), "position" varchar(20) NOT NULL, "price" numeric(9, 2) NOT NULL, "nameBrand" varchar(50) NOT NULL);
--
-- Create model Option
--
CREATE TABLE "Option" ("name" varchar(100) NOT NULL PRIMARY KEY);
--
-- Create model Brake
--
CREATE TABLE "Brake" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "model" varchar(80) NOT NULL, "abs" boolean NOT NULL, "price" numeric(7, 2) NOT NULL, CONSTRAINT "CK_Brake_price" CHECK ("price" > 0));
--
-- Create model Car
--
CREATE TABLE "Car" ("modelName" varchar(80) NOT NULL PRIMARY KEY, "numberOfSeats" integer NOT NULL CHECK ("numberOfSeats" >= 0), "releaseDate" date NOT NULL, "defaultPrice" numeric(12, 2) NOT NULL, "nameBrand" varchar(50) NOT NULL);
--
-- Create model Electric
--
CREATE TABLE "Electric" ("modelNameEngine" varchar(80) NOT NULL PRIMARY KEY, "maxPower" integer NOT NULL CHECK ("maxPower" >= 0), "batteryDistanceCapacity" integer NOT NULL CHECK ("batteryDistanceCapacity" >= 0));
--
-- Create model Gas
--
CREATE TABLE "Gas" ("modelNameEngine" varchar(80) NOT NULL PRIMARY KEY, "numberOfCylinders" integer NOT NULL CHECK ("numberOfCylinders" >= 0), "engineDisplacement" numeric(3, 1) NOT NULL);
--
-- Create model Image
--
CREATE TABLE "Image" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "image" varchar(1030) NOT NULL, "modelNameCar" varchar(80) NOT NULL);
--
-- Create model Modification
--
CREATE TABLE "Modification" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "text" varchar(500) NOT NULL, "isAccepted" boolean NULL, "emailUserManages" varchar(320) NOT NULL, "emailUserSuggests" varchar(320) NOT NULL, "modelNameCar" varchar(80) NOT NULL);
--
-- Create model CarOption
--
CREATE TABLE "Car_Option" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "optionPrice" numeric(7, 2) NOT NULL, "modelNameCar" varchar(80) NOT NULL, "nameOption" varchar(100) NOT NULL);
--
-- Create model Performance
--
CREATE TABLE "Performance" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "maxSpeed" integer NOT NULL CHECK ("maxSpeed" >= 0), "zeroToHundredTime" numeric(4, 2) NOT NULL, CONSTRAINT "CK_Performance_maxSpeed" CHECK (("maxSpeed" > 0 AND "maxSpeed" <= 600)), CONSTRAINT "CK_Performance_zeroToHundredTime" CHECK ("zeroToHundredTime" > 0));
--
-- Create model Specification
--
CREATE TABLE "Specification" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "idBrake" integer NOT NULL, "idPerformance" integer NOT NULL, "modelNameCar" varchar(80) NOT NULL);
--
-- Create model Review
--
CREATE TABLE "Review" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "title" varchar(30) NOT NULL, "content" varchar(1000) NULL, "grade" integer NOT NULL CHECK ("grade" >= 0), "date" date NOT NULL, "emailUser" varchar(320) NOT NULL, "idSpecification" integer NOT NULL);
--
-- Create model CategorySpecification
--
CREATE TABLE "Category_Specification" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "nameCategory" varchar(80) NOT NULL, "idSpecification" integer NOT NULL);
--
-- Create model SpecificationEngine
--
CREATE TABLE "Specification_Engine" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "idSpecification" integer NOT NULL, "modelNameEngine" varchar(80) NOT NULL);
--
-- Create model Transmission
--
CREATE TABLE "Transmission" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "type" varchar(10) NOT NULL, "numberOfGears" integer NOT NULL CHECK ("numberOfGears" >= 0), "drivetrain" varchar(5) NOT NULL, "price" numeric(8, 2) NOT NULL, CONSTRAINT "CK_Transmission_numberOfGears" CHECK (("numberOfGears" > 0 AND "numberOfGears" <= 10)), CONSTRAINT "CK_Transmission_price" CHECK ("price" > 0));
--
-- Add field idTransmission to specification
--
ALTER TABLE "Specification" ADD COLUMN "idTransmission" integer NOT NULL CONSTRAINT "Specification_idTransmission_3b808429_fk_Transmission_id" REFERENCES "Transmission"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Specification_idTransmission_3b808429_fk_Transmission_id" IMMEDIATE;
--
-- Create model UserCategory
--
CREATE TABLE "User_Category" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "emailUser" varchar(320) NOT NULL, "nameCategory" varchar(80) NOT NULL);
--
-- Create constraint CK_Car_numberOfSeats on model car
--
ALTER TABLE "Car" ADD CONSTRAINT "CK_Car_numberOfSeats" CHECK ("numberOfSeats" >= 1);
--
-- Create constraint CK_Car_releaseDate on model car
--
ALTER TABLE "Car" ADD CONSTRAINT "CK_Car_releaseDate" CHECK ("releaseDate" <= '2024-12-20'::date);
--
-- Create constraint CK_Car_defaultPrice on model car
--
ALTER TABLE "Car" ADD CONSTRAINT "CK_Car_defaultPrice" CHECK ("defaultPrice" > 0);
--
-- Create constraint CK_Electric_maxPower on model electric
--
ALTER TABLE "Electric" ADD CONSTRAINT "CK_Electric_maxPower" CHECK ("maxPower" > 0);
--
-- Create constraint CK_Electric_batteryDistanceCapacity on model electric
--
ALTER TABLE "Electric" ADD CONSTRAINT "CK_Electric_batteryDistanceCapacity" CHECK ("batteryDistanceCapacity" > 0);
--
-- Create constraint CK_Gas_numberOfCylinders on model gas
--
ALTER TABLE "Gas" ADD CONSTRAINT "CK_Gas_numberOfCylinders" CHECK (("numberOfCylinders" >= 0 AND "numberOfCylinders" <= 18));
--
-- Create constraint CK_Engine_horsePower on model engine
--
ALTER TABLE "Engine" ADD CONSTRAINT "CK_Engine_horsePower" CHECK (("horsePower" > 0 AND "horsePower" < 3000));
--
-- Create constraint CK_Engine_price on model engine
--
ALTER TABLE "Engine" ADD CONSTRAINT "CK_Engine_price" CHECK ("price" > 0);
--
-- Alter unique_together for image (1 constraint(s))
--
ALTER TABLE "Image" ADD CONSTRAINT "Image_modelNameCar_image_7ff96f8b_uniq" UNIQUE ("modelNameCar", "image");
--
-- Create constraint CK_Car_Option_optionPrice on model caroption
--
ALTER TABLE "Car_Option" ADD CONSTRAINT "CK_Car_Option_optionPrice" CHECK ("optionPrice" >= 0);
--
-- Alter unique_together for caroption (1 constraint(s))
--
ALTER TABLE "Car_Option" ADD CONSTRAINT "Car_Option_modelNameCar_nameOption_0e4c7c82_uniq" UNIQUE ("modelNameCar", "nameOption");
--
-- Create constraint CK_Review_grade on model review
--
ALTER TABLE "Review" ADD CONSTRAINT "CK_Review_grade" CHECK (("grade" > 0 AND "grade" <= 5));
--
-- Create constraint CK_Review_date on model review
--
ALTER TABLE "Review" ADD CONSTRAINT "CK_Review_date" CHECK ("date" <= '2024-12-20'::date);
--
-- Alter unique_together for categoryspecification (1 constraint(s))
--
ALTER TABLE "Category_Specification" ADD CONSTRAINT "Category_Specification_idSpecification_nameCate_6484e4f7_uniq" UNIQUE ("idSpecification", "nameCategory");
--
-- Alter unique_together for specificationengine (1 constraint(s))
--
ALTER TABLE "Specification_Engine" ADD CONSTRAINT "Specification_Engine_idSpecification_modelNam_493feef8_uniq" UNIQUE ("idSpecification", "modelNameEngine");
--
-- Alter unique_together for usercategory (1 constraint(s))
--
ALTER TABLE "User_Category" ADD CONSTRAINT "User_Category_emailUser_nameCategory_19c6e760_uniq" UNIQUE ("emailUser", "nameCategory");
CREATE INDEX "AppUser_email_1c8745d0_like" ON "AppUser" ("email" varchar_pattern_ops);
CREATE INDEX "Brand_name_2effc528_like" ON "Brand" ("name" varchar_pattern_ops);
CREATE INDEX "Category_name_c832dcca_like" ON "Category" ("name" varchar_pattern_ops);
ALTER TABLE "Engine" ADD CONSTRAINT "Engine_nameBrand_d0d88dd4_fk_Brand_name" FOREIGN KEY ("nameBrand") REFERENCES "Brand" ("name") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Engine_modelName_92ac0793_like" ON "Engine" ("modelName" varchar_pattern_ops);
CREATE INDEX "Engine_nameBrand_d0d88dd4" ON "Engine" ("nameBrand");
CREATE INDEX "Engine_nameBrand_d0d88dd4_like" ON "Engine" ("nameBrand" varchar_pattern_ops);
CREATE INDEX "Option_name_6c7a41d9_like" ON "Option" ("name" varchar_pattern_ops);
ALTER TABLE "Car" ADD CONSTRAINT "Car_nameBrand_3d558850_fk_Brand_name" FOREIGN KEY ("nameBrand") REFERENCES "Brand" ("name") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Car_modelName_a61bc665_like" ON "Car" ("modelName" varchar_pattern_ops);
CREATE INDEX "Car_nameBrand_3d558850" ON "Car" ("nameBrand");
CREATE INDEX "Car_nameBrand_3d558850_like" ON "Car" ("nameBrand" varchar_pattern_ops);
ALTER TABLE "Electric" ADD CONSTRAINT "Electric_modelNameEngine_ee4bdf3e_fk_Engine_modelName" FOREIGN KEY ("modelNameEngine") REFERENCES "Engine" ("modelName") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Electric_modelNameEngine_ee4bdf3e_like" ON "Electric" ("modelNameEngine" varchar_pattern_ops);
ALTER TABLE "Gas" ADD CONSTRAINT "Gas_modelNameEngine_9cff2e58_fk_Engine_modelName" FOREIGN KEY ("modelNameEngine") REFERENCES "Engine" ("modelName") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Gas_modelNameEngine_9cff2e58_like" ON "Gas" ("modelNameEngine" varchar_pattern_ops);
ALTER TABLE "Image" ADD CONSTRAINT "Image_modelNameCar_f5681e9c_fk_Car_modelName" FOREIGN KEY ("modelNameCar") REFERENCES "Car" ("modelName") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Image_modelNameCar_f5681e9c" ON "Image" ("modelNameCar");
CREATE INDEX "Image_modelNameCar_f5681e9c_like" ON "Image" ("modelNameCar" varchar_pattern_ops);
ALTER TABLE "Modification" ADD CONSTRAINT "Modification_emailUserManages_d7a06df3_fk_AppUser_email" FOREIGN KEY ("emailUserManages") REFERENCES "AppUser" ("email") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Modification" ADD CONSTRAINT "Modification_emailUserSuggests_c29efaa8_fk_AppUser_email" FOREIGN KEY ("emailUserSuggests") REFERENCES "AppUser" ("email") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Modification" ADD CONSTRAINT "Modification_modelNameCar_42d49a05_fk_Car_modelName" FOREIGN KEY ("modelNameCar") REFERENCES "Car" ("modelName") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Modification_emailUserManages_d7a06df3" ON "Modification" ("emailUserManages");
CREATE INDEX "Modification_emailUserManages_d7a06df3_like" ON "Modification" ("emailUserManages" varchar_pattern_ops);
CREATE INDEX "Modification_emailUserSuggests_c29efaa8" ON "Modification" ("emailUserSuggests");
CREATE INDEX "Modification_emailUserSuggests_c29efaa8_like" ON "Modification" ("emailUserSuggests" varchar_pattern_ops);
CREATE INDEX "Modification_modelNameCar_42d49a05" ON "Modification" ("modelNameCar");
CREATE INDEX "Modification_modelNameCar_42d49a05_like" ON "Modification" ("modelNameCar" varchar_pattern_ops);
ALTER TABLE "Car_Option" ADD CONSTRAINT "Car_Option_modelNameCar_26906231_fk_Car_modelName" FOREIGN KEY ("modelNameCar") REFERENCES "Car" ("modelName") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Car_Option" ADD CONSTRAINT "Car_Option_nameOption_f456d536_fk_Option_name" FOREIGN KEY ("nameOption") REFERENCES "Option" ("name") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Car_Option_modelNameCar_26906231" ON "Car_Option" ("modelNameCar");
CREATE INDEX "Car_Option_modelNameCar_26906231_like" ON "Car_Option" ("modelNameCar" varchar_pattern_ops);
CREATE INDEX "Car_Option_nameOption_f456d536" ON "Car_Option" ("nameOption");
CREATE INDEX "Car_Option_nameOption_f456d536_like" ON "Car_Option" ("nameOption" varchar_pattern_ops);
ALTER TABLE "Specification" ADD CONSTRAINT "Specification_idBrake_7f6f1115_fk_Brake_id" FOREIGN KEY ("idBrake") REFERENCES "Brake" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Specification" ADD CONSTRAINT "Specification_idPerformance_8d62500e_fk_Performance_id" FOREIGN KEY ("idPerformance") REFERENCES "Performance" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Specification" ADD CONSTRAINT "Specification_modelNameCar_84fe8dae_fk_Car_modelName" FOREIGN KEY ("modelNameCar") REFERENCES "Car" ("modelName") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Specification_idBrake_7f6f1115" ON "Specification" ("idBrake");
CREATE INDEX "Specification_idPerformance_8d62500e" ON "Specification" ("idPerformance");
CREATE INDEX "Specification_modelNameCar_84fe8dae" ON "Specification" ("modelNameCar");
CREATE INDEX "Specification_modelNameCar_84fe8dae_like" ON "Specification" ("modelNameCar" varchar_pattern_ops);
ALTER TABLE "Review" ADD CONSTRAINT "Review_emailUser_95eeda9b_fk_AppUser_email" FOREIGN KEY ("emailUser") REFERENCES "AppUser" ("email") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Review" ADD CONSTRAINT "Review_idSpecification_df446ec0_fk_Specification_id" FOREIGN KEY ("idSpecification") REFERENCES "Specification" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Review_emailUser_95eeda9b" ON "Review" ("emailUser");
CREATE INDEX "Review_emailUser_95eeda9b_like" ON "Review" ("emailUser" varchar_pattern_ops);
CREATE INDEX "Review_idSpecification_df446ec0" ON "Review" ("idSpecification");
ALTER TABLE "Category_Specification" ADD CONSTRAINT "Category_Specification_nameCategory_603449a6_fk_Category_name" FOREIGN KEY ("nameCategory") REFERENCES "Category" ("name") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Category_Specification" ADD CONSTRAINT "Category_Specificati_idSpecification_0542d427_fk_Specifica" FOREIGN KEY ("idSpecification") REFERENCES "Specification" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Category_Specification_nameCategory_603449a6" ON "Category_Specification" ("nameCategory");
CREATE INDEX "Category_Specification_nameCategory_603449a6_like" ON "Category_Specification" ("nameCategory" varchar_pattern_ops);
CREATE INDEX "Category_Specification_idSpecification_0542d427" ON "Category_Specification" ("idSpecification");
ALTER TABLE "Specification_Engine" ADD CONSTRAINT "Specification_Engine_idSpecification_c6e61888_fk_Specifica" FOREIGN KEY ("idSpecification") REFERENCES "Specification" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Specification_Engine" ADD CONSTRAINT "Specification_Engine_modelNameEngine_bcee2097_fk_Engine_mo" FOREIGN KEY ("modelNameEngine") REFERENCES "Engine" ("modelName") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Specification_Engine_idSpecification_c6e61888" ON "Specification_Engine" ("idSpecification");
CREATE INDEX "Specification_Engine_modelNameEngine_bcee2097" ON "Specification_Engine" ("modelNameEngine");
CREATE INDEX "Specification_Engine_modelNameEngine_bcee2097_like" ON "Specification_Engine" ("modelNameEngine" varchar_pattern_ops);
CREATE INDEX "Specification_idTransmission_3b808429" ON "Specification" ("idTransmission");
ALTER TABLE "User_Category" ADD CONSTRAINT "User_Category_emailUser_0462960e_fk_AppUser_email" FOREIGN KEY ("emailUser") REFERENCES "AppUser" ("email") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "User_Category" ADD CONSTRAINT "User_Category_nameCategory_53517e4f_fk_Category_name" FOREIGN KEY ("nameCategory") REFERENCES "Category" ("name") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "User_Category_emailUser_0462960e" ON "User_Category" ("emailUser");
CREATE INDEX "User_Category_emailUser_0462960e_like" ON "User_Category" ("emailUser" varchar_pattern_ops);
CREATE INDEX "User_Category_nameCategory_53517e4f" ON "User_Category" ("nameCategory");
CREATE INDEX "User_Category_nameCategory_53517e4f_like" ON "User_Category" ("nameCategory" varchar_pattern_ops);
COMMIT;
```
